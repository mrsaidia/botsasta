<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Bot Delivery System</title>
    <link rel="stylesheet" href="admin.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="admin-container">
        <!-- Header -->
        <header class="admin-header">
            <div class="header-left">
                <h1><i class="fas fa-cog"></i> Admin Panel</h1>
                <p>Bot Delivery System Management</p>
            </div>
            <div class="header-right">
                <span class="admin-info">Welcome, <span id="adminName">Admin</span>!</span>
                <button class="btn btn-logout" onclick="handleLogout()">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </header>

        <!-- Tab Navigation -->
        <nav class="tab-navigation">
            <button class="tab-btn active" onclick="switchTab('users')" data-tab="users">
                <i class="fas fa-users"></i>
                <span>Manage Users</span>
            </button>
            <button class="tab-btn" onclick="switchTab('accounts')" data-tab="accounts">
                <i class="fas fa-box"></i>
                <span>Manage Accounts</span>
            </button>
            <button class="tab-btn" onclick="switchTab('discounts')" data-tab="discounts">
                <i class="fas fa-percent"></i>
                <span>Discounts</span>
            </button>
            <button class="tab-btn" onclick="switchTab('history')" data-tab="history">
                <i class="fas fa-history"></i>
                <span>Order History</span>
            </button>
            <button class="tab-btn" onclick="switchTab('backup')" data-tab="backup">
                <i class="fas fa-database"></i>
                <span>Backup & Notifications</span>
            </button>
            <button class="tab-btn" onclick="switchTab('shared-accounts')" data-tab="shared-accounts">
                <i class="fas fa-share-alt"></i>
                <span>Shared Accounts</span>
            </button>

        </nav>

        <!-- Tab Content -->
        <main class="tab-content">
        <!-- Users Tab -->
            <div id="users-tab" class="tab-panel active">
                <div class="panel-header">
                    <h2><i class="fas fa-users"></i> Manage Users</h2>
                    <button class="btn btn-primary" onclick="showAddUserModal()">
                        <i class="fas fa-plus"></i> Add New User
                    </button>
                </div>

                <div class="table-container">
                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;gap:10px;">
                        <input type="text" id="searchUserInput" placeholder="Search username..." style="padding:7px 12px;border-radius:7px;border:1.5px solid #e2e8f0;min-width:180px;">
                        <div>
                            <button class="btn btn-secondary" id="sortCreditDescBtn" style="margin-right:5px;"><i class="fas fa-sort-amount-down-alt"></i> Credit High-Low</button>
                            <button class="btn btn-secondary" id="sortCreditAscBtn" style="margin-right:5px;"><i class="fas fa-sort-amount-up"></i> Credit Low-High</button>
                            <button class="btn btn-secondary" id="unsortBtn"><i class="fas fa-sort"></i> Unsort</button>
                        </div>
                    </div>
                    <table class="data-table" id="usersTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Username</th>
                                <th>Auth Code</th>
                                <th>Credits</th>
                                <th>Total Downloads</th>
                                <th>Status</th>
                                <th>Created Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="usersTableBody">
                            <!-- Users data will be loaded here -->
                        </tbody>
                    </table>
            </div>
        </div>

            <!-- Accounts Tab -->
            <div id="accounts-tab" class="tab-panel">
                <div class="panel-header">
                    <h2><i class="fas fa-box"></i> Manage Products</h2>
                    <button class="btn btn-primary" onclick="showAddProductModal()">
                        <i class="fas fa-plus"></i> Add New Product
                    </button>
                </div>

                <div class="table-container">
                    <table class="data-table" id="accountsTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Logo</th>
                                <th>Title</th>
                                <th>Description</th>
                                <th>Price (Credits)</th>
                                <th>Stock</th>
                                <th>Total Sold</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="accountsTableBody">
                            <!-- Products data will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Discounts Tab -->
            <div id="discounts-tab" class="tab-panel">
                <div class="panel-header">
                    <h2><i class="fas fa-percent"></i> Discounts Management</h2>
                </div>

                <!-- Sub-tabs for discounts -->
                <div class="sub-tab-navigation">
                    <button class="sub-tab-btn active" onclick="switchDiscountTab('user-discounts')" data-subtab="user-discounts">
                        <i class="fas fa-user-tag"></i>
                        <span>User Discounts</span>
                    </button>
                    <button class="sub-tab-btn" onclick="switchDiscountTab('coupon-codes')" data-subtab="coupon-codes">
                        <i class="fas fa-ticket-alt"></i>
                        <span>Coupon Codes</span>
                    </button>
                </div>

                <!-- User Discounts Sub-tab -->
                <div id="user-discounts-subtab" class="sub-tab-panel active">
                    <div class="sub-panel-header">
                        <h3><i class="fas fa-user-tag"></i> User Discounts</h3>
                        <p>Apply percentage discounts to specific users on specific products or all products</p>
                    </div>

                    <div class="discount-form-container">
                        <div class="form-card">
                            <h4><i class="fas fa-plus-circle"></i> Add User Discount</h4>
                            
                            <form id="addUserDiscountForm" class="discount-form">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="userDiscountUser">User *</label>
                                        <select id="userDiscountUser" name="userId" required>
                                            <option value="">Select User</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="userDiscountProduct">Product</label>
                                        <select id="userDiscountProduct" name="productId">
                                            <option value="">All Products</option>
                                        </select>
                                        <small>Leave empty to apply discount to all products</small>
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="userDiscountPercentage">Discount Percentage *</label>
                                        <input type="number" id="userDiscountPercentage" name="percentage" 
                                               min="1" max="100" required placeholder="e.g. 20">
                                        <small>1-100% discount</small>
                                    </div>
                                    <div class="form-group">
                                        <label for="userDiscountExpires">Expires Date</label>
                                        <input type="datetime-local" id="userDiscountExpires" name="expiresDate">
                                        <small>Leave empty for no expiration</small>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="userDiscountDescription">Description</label>
                                    <input type="text" id="userDiscountDescription" name="description" 
                                           placeholder="e.g. VIP customer discount">
                                </div>
                                
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-plus"></i> Add User Discount
                                </button>
                            </form>
                        </div>
                    </div>

                    <div class="table-container">
                        <table class="data-table" id="userDiscountsTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>User</th>
                                    <th>Product</th>
                                    <th>Discount %</th>
                                    <th>Description</th>
                                    <th>Expires</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="userDiscountsTableBody">
                                <!-- User discounts data will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Coupon Codes Sub-tab -->
                <div id="coupon-codes-subtab" class="sub-tab-panel">
                    <div class="sub-panel-header">
                        <h3><i class="fas fa-ticket-alt"></i> Coupon Codes</h3>
                        <p>Create discount codes that customers can use during checkout</p>
                    </div>

                    <div class="discount-form-container">
                        <div class="form-card">
                            <h4><i class="fas fa-plus-circle"></i> Add Coupon Code</h4>
                            
                            <form id="addCouponCodeForm" class="discount-form">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="couponCode">Coupon Code *</label>
                                        <input type="text" id="couponCode" name="code" required 
                                               placeholder="e.g. SAVE20" style="text-transform: uppercase;">
                                        <small>Code will be automatically converted to uppercase</small>
                                    </div>
                                    <div class="form-group">
                                        <label for="couponProduct">Product</label>
                                        <select id="couponProduct" name="productId">
                                            <option value="">All Products</option>
                                        </select>
                                        <small>Leave empty to apply to all products</small>
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="couponPercentage">Discount Percentage *</label>
                                        <input type="number" id="couponPercentage" name="percentage" 
                                               min="1" max="100" required placeholder="e.g. 15">
                                        <small>1-100% discount</small>
                                    </div>
                                    <div class="form-group">
                                        <label for="couponMaxUses">Maximum Uses</label>
                                        <input type="number" id="couponMaxUses" name="maxUses" 
                                               min="1" placeholder="e.g. 50">
                                        <small>Leave empty for unlimited uses</small>
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="couponExpires">Expires Date</label>
                                        <input type="datetime-local" id="couponExpires" name="expiresDate">
                                        <small>Leave empty for no expiration</small>
                                    </div>
                                    <div class="form-group">
                                        <label for="couponDescription">Description</label>
                                        <input type="text" id="couponDescription" name="description" 
                                               placeholder="e.g. Black Friday Sale">
                                    </div>
                                </div>
                                
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-plus"></i> Add Coupon Code
                                </button>
                            </form>
                        </div>
                    </div>

                    <div class="table-container">
                        <table class="data-table" id="couponCodesTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Code</th>
                                    <th>Product</th>
                                    <th>Discount %</th>
                                    <th>Max Uses</th>
                                    <th>Used Count</th>
                                    <th>Expires</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="couponCodesTableBody">
                                <!-- Coupon codes data will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Order History Tab -->
            <div id="history-tab" class="tab-panel">
                <div class="panel-header">
                    <h2><i class="fas fa-history"></i> Order History</h2>
                    <div class="header-controls">
                        <div class="view-controls">
                            <div class="view-toggle">
                                <label class="toggle-option">
                                    <input type="radio" name="historyView" value="cards" checked>
                                    <span><i class="fas fa-th-large"></i> Card View</span>
                                </label>
                                <label class="toggle-option">
                                    <input type="radio" name="historyView" value="table">
                                    <span><i class="fas fa-table"></i> Table View</span>
                                </label>
                            </div>
                        </div>
                        <div class="search-filters">
                            <input type="text" id="historySearch" placeholder="Search by user, product, or order code..." class="search-input">
                            <input type="text" id="productSearch" placeholder="Search by account data (username, password...)..." class="search-input">
                            <select id="historyFilter" class="filter-select">
                                <option value="">All Orders</option>
                                <option value="today">Today</option>
                                <option value="week">This Week</option>
                                <option value="month">This Month</option>
                            </select>
                        </div>
                        <button class="btn btn-success" onclick="exportHistoryCSV()">
                            <i class="fas fa-download"></i> Export CSV
                        </button>
                    </div>
                </div>
                
                <!-- Pagination Controls -->
                <div class="pagination-controls">
                    <div class="pagination-info">
                        <span>Show</span>
                        <select id="itemsPerPage" class="items-per-page">
                            <option value="12">12</option>
                            <option value="24">24</option>
                            <option value="48">48</option>
                            <option value="all">All</option>
                        </select>
                        <span>items per page</span>
                    </div>
                    <div class="pagination-navigation">
                        <button id="prevPage" class="pagination-btn" onclick="changePage(-1)">
                            <i class="fas fa-chevron-left"></i> Previous
                        </button>
                        <span class="page-info">
                            Page <span id="currentPage">1</span> of <span id="totalPages">1</span>
                        </span>
                        <button id="nextPage" class="pagination-btn" onclick="changePage(1)">
                            Next <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
                
                <div class="history-container">
                    <!-- Card View -->
                    <div class="history-cards-container" id="historyCardsContainer">
                        <!-- Order history cards will be loaded here -->
        </div>

                    <!-- Table View -->
                    <div class="history-table-container" id="historyTableContainer" style="display: none;">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Order ID</th>
                                    <th>User</th>
                                    <th>Product</th>
                                    <th>Quantity</th>
                                    <th>Credits Used</th>
                                    <th>Date</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="historyTableBody">
                                <!-- Table rows will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Backup & Notifications Tab -->
            <div id="backup-tab" class="tab-panel">
                <div class="panel-header">
                    <h2><i class="fas fa-database"></i> Backup & Notifications</h2>
                </div>

                <div class="backup-notifications-container">
                    <!-- Telegram Configuration -->
                    <div class="form-card">
                        <h3><i class="fas fa-robot"></i> Telegram Configuration</h3>
                        <p>Configure your Telegram bot for backup and notifications</p>
                        
                        <div class="form-group">
                            <label for="telegramBotToken">Bot Token</label>
                            <input type="password" id="telegramBotToken" placeholder="Enter bot token from @BotFather">
                            <small>Get this from @BotFather on Telegram</small>
                        </div>
                        
                        <div class="form-group">
                            <label for="telegramChatId">Chat ID</label>
                            <input type="text" id="telegramChatId" placeholder="Enter chat ID">
                            <small>Get this from @userinfobot</small>
                        </div>
                        
                        <div class="telegram-actions">
                            <button class="btn btn-primary" onclick="saveTelegramSettings()">
                                <i class="fas fa-save"></i> Save Settings
                            </button>
                            <button class="btn btn-secondary" onclick="testTelegramConnection()">
                                <i class="fas fa-wifi"></i> Test Connection
                            </button>
                        </div>
                        
                        <div class="telegram-status">
                            <div class="status-indicator" id="telegramStatusIndicator">
                                <div class="status-dot"></div>
                                <span class="status-text" id="telegramStatusText">Not configured</span>
                            </div>
                        </div>
                    </div>

                    <!-- Sales Notifications -->
                    <div class="form-card">
                        <h3><i class="fas fa-bell"></i> Sales Notifications</h3>
                        <p>Automatically notify when customers make purchases</p>
                        
                        <div class="notification-toggle">
                            <label class="switch">
                                <input type="checkbox" id="salesNotificationsEnabled" onchange="toggleSalesNotifications()">
                                <span class="slider"></span>
                            </label>
                            <span class="toggle-text">Enable sales notifications</span>
                        </div>
                        
                        <div class="notification-preview">
                            <h4>Notification Format Preview:</h4>
                            <div class="preview-message">
                                ðŸ›’ <strong>New Sale Alert!</strong><br>
                                ðŸ’° Product: Sample Account<br>
                                ðŸ‘¤ Customer: user123<br>
                                ðŸ’³ Amount: 5 credits<br>
                                ðŸ“… Time: 2024-01-15 14:30:25<br>
                                <strong>Order:</strong> ORD123456
                            </div>
                        </div>
                        
                        <button class="btn btn-warning" onclick="sendTestSaleNotification()">
                            <i class="fas fa-test-tube"></i> Send Test Notification
                        </button>
                    </div>

                    <!-- Backup Management -->
                    <div class="form-card">
                        <h3><i class="fas fa-cloud-upload-alt"></i> Backup Management</h3>
                        <p>Create and send database backups to Telegram</p>
                        
                        <div class="backup-stats">
                            <div class="stat-box">
                                <div class="stat-number" id="totalUsersCount">0</div>
                                <div class="stat-label">Users</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-number" id="totalProductsCount">0</div>
                                <div class="stat-label">Products</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-number" id="totalOrdersCount">0</div>
                                <div class="stat-label">Orders</div>
                            </div>
                        </div>

                        <div class="backup-options">
                            <h4>Backup Options:</h4>
                            <div class="checkbox-group">
                                <label class="checkbox-item">
                                    <input type="checkbox" id="backupUsers" checked>
                                    <span class="checkmark"></span>
                                    <span>Users Data</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" id="backupProducts" checked>
                                    <span class="checkmark"></span>
                                    <span>Products Data</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" id="backupOrders" checked>
                                    <span class="checkmark"></span>
                                    <span>Orders History</span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="backup-actions">
                            <button class="btn btn-success" onclick="createAndSendBackup()">
                                <i class="fas fa-paper-plane"></i> Create & Send to Telegram
                            </button>
                            <button class="btn btn-primary" onclick="downloadBackup()">
                                <i class="fas fa-download"></i> Download Backup
                            </button>
                            <button class="btn btn-warning" onclick="showRecoverBackupModal()">
                                <i class="fas fa-upload"></i> Recover from Backup
                            </button>
                            <button class="btn btn-info" onclick="scheduleBackupIn6Hours()">
                                <i class="fas fa-clock"></i> Schedule Backup in 6 Hours
                            </button>
                        </div>
                        
                        <div class="last-backup-info">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                <div>
                                    <span class="last-backup-label">Last backup:</span>
                                    <span class="last-backup-time" id="lastBackupTime">Never</span>
                                </div>
                                <div>
                                    <span class="scheduled-backup-label">Next scheduled:</span>
                                    <span class="scheduled-backup-time" id="scheduledBackupTime">None</span>
                                </div>
                            </div>
                            <div class="auto-backup-status" id="autoBackupStatus" style="text-align: center; padding: 5px; border-radius: 4px; background: #f8f9fa;">
                                Auto backup: <span id="autoBackupStatusText">Checking...</span>
                            </div>
                        </div>
                    </div>

                    <!-- Auto Backup Settings -->
                    <div class="form-card">
                        <h3><i class="fas fa-clock"></i> Auto Backup Settings</h3>
                        <p>Schedule automatic backups to Telegram</p>
                        
                        <div class="auto-backup-toggle">
                            <label class="switch">
                                <input type="checkbox" id="autoBackupEnabled" onchange="toggleAutoBackup()">
                                <span class="slider"></span>
                            </label>
                            <span class="toggle-text">Enable auto backup</span>
                        </div>
                        
                        <div class="backup-frequency" id="backupFrequencyOptions" style="display: none;">
                            <label for="backupInterval">Backup Frequency:</label>
                            <select id="backupInterval">
                                <option value="daily">Daily</option>
                                <option value="weekly">Weekly</option>
                                <option value="monthly">Monthly</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Shared Accounts Tab -->
            <div id="shared-accounts-tab" class="tab-panel">
                <div class="panel-header">
                    <h2><i class="fas fa-share-alt"></i> Shared Accounts Management</h2>
                </div>
                
                <!-- Sub-tabs for Accounts and Codes -->
                <div class="sub-tabs">
                    <button class="sub-tab-btn active" onclick="switchSharedTab('accounts')" data-tab="accounts">
                        <i class="fas fa-user-friends"></i> Accounts
                    </button>
                    <button class="sub-tab-btn" onclick="switchSharedTab('codes')" data-tab="codes">
                        <i class="fas fa-key"></i> Unique Codes
                    </button>
                </div>

                <!-- Accounts Sub-tab -->
                <div id="accounts-subtab" class="sub-tab-panel active">
                    <div class="panel-header">
                        <button class="btn btn-primary" onclick="showAddSharedAccountModal()">
                            <i class="fas fa-plus"></i> Add Account
                        </button>
                    </div>
                    
                    <div class="shared-accounts-info">
                        <div class="info-card">
                            <h3><i class="fas fa-info-circle"></i> Account Management</h3>
                            <p>Manage shared accounts with login credentials. Each account contains:</p>
                            <ul>
                                <li><strong>Account Name:</strong> Display name for the service</li>
                                <li><strong>Username & Password:</strong> Login credentials</li>
                                <li><strong>2FA Secret:</strong> For generating authentication codes</li>
                                <li><strong>Description:</strong> Additional account information</li>
                            </ul>
                        </div>
                    </div>

                    <div class="table-container">
                        <table class="data-table" id="sharedAccountsTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Account Name</th>
                                    <th>Description</th>
                                    <th>Status</th>
                                    <th>Created Date</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="sharedAccountsTableBody">
                                <!-- Shared accounts data will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Codes Sub-tab -->
                <div id="codes-subtab" class="sub-tab-panel">
                    <div class="panel-header">
                        <button class="btn btn-primary" onclick="showAddSharedCodeModal()">
                            <i class="fas fa-plus"></i> Add Code
                        </button>
                    </div>
                    
                    <div class="shared-accounts-info">
                        <div class="info-card">
                            <h3><i class="fas fa-info-circle"></i> Code Management</h3>
                            <p>Manage unique codes that users can use to access accounts. Each code has:</p>
                            <ul>
                                <li><strong>Unique Code:</strong> The code users enter to get access</li>
                                <li><strong>Linked Account:</strong> Which account this code provides access to</li>
                                <li><strong>Usage Limit:</strong> Maximum uses (0 = unlimited)</li>
                                <li><strong>Assigned User:</strong> Who can use this code</li>
                            </ul>
                            <p><strong>Usage:</strong> Give codes to users, they enter them in reseller page to get account info and 2FA codes.</p>
                        </div>
                    </div>

                    <div class="table-container">
                        <table class="data-table" id="sharedCodesTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Account</th>
                                    <th>Unique Code</th>
                                    <th>Usage</th>
                                    <th>Assigned User</th>
                                    <th>Status</th>
                                    <th>Created Date</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="sharedCodesTableBody">
                                <!-- Shared codes data will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <!-- Modals -->
    <div id="modalOverlay" class="modal-overlay" onclick="closeModal()"></div>
    
    <!-- Add User Modal -->
    <div id="addUserModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-user-plus"></i> Add New User</h3>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <form id="addUserForm">
                <div class="form-group">
                    <label for="newUsername">Username *</label>
                    <input type="text" id="newUsername" name="username" required>
                </div>
                <div class="form-group">
                    <label for="newCredits">Initial Credits</label>
                    <input type="number" id="newCredits" name="credits" value="0" min="0">
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Add User</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Product Modal -->
    <div id="addProductModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-box"></i> Add New Product</h3>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <form id="addProductForm">
                <div class="form-group">
                    <label for="newProductTitle">Product Title *</label>
                    <input type="text" id="newProductTitle" name="title" required>
                </div>
                <div class="form-group">
                    <label for="newProductDescription">Description</label>
                    <textarea id="newProductDescription" name="description" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="newProductPrice">Price (Credits) *</label>
                    <input type="number" id="newProductPrice" name="creditCost" step="0.1" min="0" required>
                </div>
                <div class="form-group">
                    <label for="newProductAccounts">Account Data *</label>
                    <textarea id="newProductAccounts" name="accountData" rows="5" 
                              placeholder="Enter account data (one per line)..." required></textarea>
                </div>
                <div class="form-group">
                    <label for="newProductLogo">Logo Upload</label>
                    <input type="file" id="newProductLogo" name="logo" accept="image/*">
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Add Product</button>
                        </div>
                    </form>
        </div>
    </div>

    <!-- Edit User Modal -->
    <div id="editUserModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-user-edit"></i> Edit User</h3>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <form id="editUserForm">
                <input type="hidden" id="editUserId" name="userId">
                <div class="form-group">
                    <label for="editUsername">Username *</label>
                    <input type="text" id="editUsername" name="username" required>
                </div>
                <div class="form-group">
                    <label for="editAuthCode">Auth Code</label>
                    <input type="text" id="editAuthCode" name="authCode" readonly>
                    <small>Click to copy to clipboard</small>
                </div>
                <div class="form-group">
                    <label for="editCredits">Credits</label>
                    <input type="number" id="editCredits" name="credits" min="0" step="0.1">
                </div>
                <div class="form-group">
                    <label for="editStatus">Status</label>
                    <select id="editStatus" name="status">
                        <option value="active">Active</option>
                        <option value="inactive">Inactive</option>
                        <option value="banned">Banned</option>
                    </select>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Update User</button>
                </div>
            </form>
        </div>
                </div>

    <!-- Edit Product Modal -->
    <div id="editProductModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-edit"></i> Edit Product</h3>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <form id="editProductForm">
                <input type="hidden" id="editProductId" name="productId">
                <div class="form-group">
                    <label for="editProductTitle">Product Title *</label>
                    <input type="text" id="editProductTitle" name="title" required>
                </div>
                <div class="form-group">
                    <label for="editProductDescription">Description</label>
                    <textarea id="editProductDescription" name="description" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="editProductPrice">Price (Credits) *</label>
                    <input type="number" id="editProductPrice" name="creditCost" step="0.1" min="0" required>
                </div>
                <div class="form-group">
                    <label for="editProductAccounts">Account Data *</label>
                    <textarea id="editProductAccounts" name="accountData" rows="5" required></textarea>
                </div>
                <div class="form-group">
                    <label for="editProductStatus">Status</label>
                    <select id="editProductStatus" name="status">
                        <option value="active">Active</option>
                        <option value="inactive">Inactive</option>
                    </select>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Update Product</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Order Details Modal -->
    <div id="orderDetailsModal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3><i class="fas fa-receipt"></i> Order Details</h3>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="order-details-content" id="orderDetailsContent">
                <!-- Order details will be loaded here -->
            </div>
            <div class="modal-actions">
                <button type="button" class="btn btn-secondary" onclick="closeModal()">Close</button>
                <button type="button" class="btn btn-primary" onclick="copyOrderDetails()">
                    <i class="fas fa-copy"></i> Copy Details
                </button>
            </div>
        </div>
    </div>

    <!-- Recover Backup Modal -->
    <div id="recoverBackupModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-upload"></i> Recover from Backup</h3>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <form id="recoverBackupForm">
                <div class="form-group">
                    <label for="backupFile">Select Backup File *</label>
                    <input type="file" id="backupFile" name="backupFile" accept=".json" required>
                    <small>Only JSON backup files are supported</small>
                </div>
                
                <div class="form-group">
                    <label>Recovery Options:</label>
                    <div class="checkbox-group">
                        <label class="checkbox-item">
                            <input type="checkbox" id="restoreUsers" checked>
                            <span class="checkmark"></span>
                            <span>Restore Users Data</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" id="restoreProducts" checked>
                            <span class="checkmark"></span>
                            <span>Restore Products Data</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" id="restoreOrders" checked>
                            <span class="checkmark"></span>
                            <span>Restore Orders History</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" id="overwriteExisting">
                            <span class="checkmark"></span>
                            <span>Overwrite Existing Data</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" id="fullRestore">
                            <span class="checkmark"></span>
                            <span style="color: #ff6b6b;">Full System Restore (Clears all data first)</span>
                        </label>
                    </div>
                </div>
                
                <div class="warning-message" style="background: #ffe8e8; border: 1px solid #ff6b6b; padding: 10px; border-radius: 5px; margin: 10px 0;">
                    <i class="fas fa-exclamation-triangle" style="color: #ff6b6b;"></i>
                    <strong>Warning:</strong> This action will modify your database. Make sure you have a current backup before proceeding.
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                    <button type="submit" class="btn btn-warning">
                        <i class="fas fa-upload"></i> Restore Backup
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script src="admin.js"></script>
</body>
</html> 